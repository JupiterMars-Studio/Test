gsap.registerPlugin(ScrollTrigger,SplitText);const windowWidth=window.innerWidth,isMobile=window.innerWidth<=768,mm=gsap.matchMedia();function getBgVideo(e=".background-video video"){return document.querySelector(e)}function whenCanPlay(e){return new Promise((t=>{if(!e)return t();if(e.readyState>=2)return t();const o=()=>{e.removeEventListener("canplay",o),t()};e.addEventListener("canplay",o,{once:!0})}))}async function playBgVideo(e){const t=getBgVideo(e);if(t){t.muted=!0,t.playsInline=!0,t.currentTime=0,await whenCanPlay(t);try{await t.play()}catch{const e=()=>{t.play().catch((()=>{})),window.removeEventListener("pointerdown",e)};window.addEventListener("pointerdown",e,{once:!0})}}}function stopBgVideo(e){const t=getBgVideo(e);if(!t)return;try{t.pause()}catch{}t.currentTime=0,t.removeAttribute("autoplay");const o=t.closest(".w-background-video");o&&o.setAttribute("data-autoplay","false")}if(sessionStorage.getItem("loaderPlayed"))stopBgVideo(".background-video video"),gsap.to(".heading-hero",{y:0,duration:.5,autoAlpha:1,ease:"power1.in"}),gsap.to(".hero-description",{y:0,duration:.5,autoAlpha:1,ease:"power1.in"},"<"),gsap.to(".button-hero_wrapper",{y:0,duration:.5,autoAlpha:1,ease:"power1.in"},"<"),gsap.to(".section_scrolling-logo",{y:0,duration:.5,ease:"power1.in"}),gsap.to(".navbar",{duration:.5,autoAlpha:1,ease:"power1.in"}),gsap.to(".hero-grid",{opacity:1,duration:1,ease:"power1.in"}),gsap.set("body",{overflow:"auto"},"<"),setTimeout(runAutoExpandIcons,600);else{sessionStorage.setItem("loaderPlayed","true"),gsap.set(".loader",{opacity:1,display:"flex"});const e=document.querySelector(".svg-wrapper"),t=document.querySelector(".svg-container");t.classList.add("first");const o=isMobile?18:35;for(let n=1;n<o;n++){const o=t.cloneNode(!0);1===n?(o.classList.remove("first"),o.classList.add("second")):(o.classList.remove("first"),o.classList.add("show")),e.appendChild(o)}const n=isMobile?8:16,r=document.querySelector(".svg-wrapper").offsetWidth-2*document.querySelector(".svg-container").offsetWidth-n;gsap.set(".bracket-text",{opacity:0}),gsap.set(".section_home-header",{y:"100vh"}),gsap.set(".section_scrolling-logo",{y:"100vh"}),gsap.set(".navbar",{opacity:0}),gsap.set(".hero-grid",{opacity:0}),gsap.set(".bracket-end",{opacity:0}),gsap.set(".link-hover-line",{opacity:0}),gsap.set(".heading-hero",{y:0,opacity:1}),gsap.set(".hero-description",{y:0,opacity:1}),gsap.set(".button-hero_wrapper",{y:0,opacity:1}),gsap.set(".video-mask",{x:isMobile?"36px":"75px"}),gsap.set(".masking-left",{width:"120px",display:"block"}),gsap.set(".masking-right",{width:"333px",display:"block"});const a=(document.querySelector(".navbar-container").offsetWidth-2*(isMobile?8:12.47)-20)/2;gsap.timeline().from(".show",{visibility:"hidden",stagger:.05,ease:"none"}).to(".second",{x:r,ease:"none",duration:isMobile?.3:.64,delay:1}).to(".show",{visibility:"hidden",stagger:{each:.02,from:"start"},ease:"none"},"<").to(".bracket-text",{opacity:1,duration:.5,ease:"none"},"<=0.2").to(".svg-container",{opacity:0,delay:1}).call((()=>playBgVideo(".background-video video")),null,"<").to(".background-video",{width:"100%",height:"50vh",duration:2,ease:"none"}).to(".video-mask",{x:0,duration:2,ease:"none"},"<").to(".company-1",{scale:isMobile?4:6,duration:2,ease:"none",x:"-120vw",y:"-40vh"},"<").to(".company-2",{scale:isMobile?4:6,duration:2,ease:"none",x:"120vw",y:"-40vh"},"<").to(".video-mask",{bottom:"10%",top:"10%",duration:.5,ease:"none"}).to(".background-video",{height:"80vh",duration:1.5,ease:"none"},"<").to(".video-mask",{top:"0%",bottom:"unset",duration:1,ease:"none"}).to(".background-video",{height:isMobile?"27px":"44px",width:isMobile?"27px":"44px",duration:1.5,ease:"none"}).to(".section_home-header",{y:0,duration:2,ease:"none"},"<").to(".bracket-end",{opacity:1,duration:.5,ease:"none"}).to(".section_scrolling-logo",{y:0,duration:1,ease:"power2.out"},"<").to(".navbar",{opacity:1,duration:.5,ease:"none"}).to(".bracket-end",{opacity:0,duration:.5,ease:"none"},"<").to(".bracket-end-nav",{display:"flex",duration:.5,ease:"none"},"<").to(".logo-right-nav",{x:a,duration:.5,ease:"none"},"<").to(".logo-left-nav",{x:-a,duration:.5,ease:"none"},"<").to(".link-hover-line",{opacity:1,duration:.5,ease:"none"},"<").to(".video-mask",{display:"none",duration:0},"<").to(".loader",{backgroundColor:"transparent",duration:.5,ease:"none"},"<").to(".logo-right-nav",{opacity:0,duration:.2,ease:"none"}).to(".masking-right",{x:-333,width:"0px",duration:1,ease:"none"},"<").to(".masking-left",{x:34,width:"0px",duration:1,ease:"none"},"<").to(".bracket-end-nav",{display:"none",duration:0,ease:"none"}).to(".hero-grid",{opacity:1,duration:1,ease:"none"}).to(".loader",{display:"none"}).to({},{duration:0,onComplete:runAutoExpandIcons}).set("body",{overflow:"auto"}).from(".flowappz-cookie-consent-popup-14",{autoAlpha:0})}const heroGrid=document.getElementById("hero-grid"),specialIndexes=[368,394,476,500],specialMobileIndexes=[184,191,160,168],specialColor=["quaternary-color","plasma-fluor","laser-fluor","secondary-background"],texts=["B2B Design","B2B Marketing Design","B2B Design Ops","B2B Branding"],mql=window.matchMedia("(max-width: 768px)");function buildGrid(){const e=mql.matches,t=e?19:18,o=e?11:30,n=e?specialMobileIndexes:specialIndexes;heroGrid.replaceChildren();const r=document.createDocumentFragment();for(let e=0;e<t*o;e++){const t=document.createElement("div");t.classList.add("hero-svg-wrapper");const o=document.createElement("div");o.classList.add("hero-svg-icon");const a=n.includes(e),i=a?n.indexOf(e):-1;a&&o.classList.add("special"),o.innerHTML=`\n        <svg viewBox="0 0 10 33" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M9.35 29.9971C3.89716 28.6535 2.33617 24.9387 2.33617 16.4973C2.33617 8.05596 3.90247 4.34112 9.35 2.99757V0H0V33H9.35V30.0024V29.9971Z" fill="${a?`var(--color--${specialColor[i]})`:"var(--color--hero-grid)"}"/>\n        </svg>\n        ${a?`<span class="expander">${texts[i]}</span>`:""}\n        <svg viewBox="0 0 10 33" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M0.648438 0V2.99805C6.10128 4.34182 7.66227 8.05727 7.66227 16.5C7.66227 24.9427 6.10128 28.6582 0.648438 30.0019V33H9.99844V0H0.648438Z" fill="${a?`var(--color--${specialColor[i]})`:"var(--color--hero-grid)"}"/>\n        </svg>\n      `,t.appendChild(o),r.appendChild(t)}heroGrid.appendChild(r)}function runAutoExpandIcons(){document.querySelectorAll(".hero-svg-icon.special").forEach(((e,t)=>{const o=e.querySelector("svg:first-of-type"),n=e.querySelector("svg:last-of-type"),r=e.querySelector(".expander"),a=window.matchMedia("(max-width: 1024px)").matches;gsap.set(r,{width:0,opacity:0}),a?setTimeout((()=>{gsap.to(o,{x:-6,duration:.3,ease:"power2.out"}),gsap.to(n,{x:6,duration:.3,ease:"power2.out"}),gsap.to(e,{background:"var(--color--background)",zIndex:2,width:"auto",duration:.3,ease:"power2.out"}),gsap.to(r,{width:"auto",opacity:1,duration:.3,display:"flex",ease:"power2.out",onUpdate:()=>{r.style.width=r.scrollWidth+"px"}})}),1e3*t):(e.addEventListener("mouseenter",(()=>{gsap.to(o,{x:-6,duration:.3,ease:"power2.out"}),gsap.to(n,{x:6,duration:.3,ease:"power2.out"}),gsap.to(r,{width:"auto",opacity:1,duration:.3,ease:"power2.out",onUpdate:()=>{r.style.width=r.scrollWidth+"px"}})})),e.addEventListener("mouseleave",(()=>{gsap.to(o,{x:0,duration:.5}),gsap.to(n,{x:0,duration:.5}),gsap.to(r,{width:0,opacity:0,duration:.5})})))}))}buildGrid(),mql.addEventListener("change",buildGrid),document.addEventListener("DOMContentLoaded",(()=>{mm.add("(min-width: 769px)",(()=>{const e=document.querySelectorAll(".text_how-we"),t=gsap.timeline();document.querySelector(".icon_how-we svg");e.forEach(((o,n)=>{const r=0===n,a=n===e.length-1;if(!r){gsap.set(o,{opacity:.65,x:-50});const e=.5*(n-1);t.to(o,{opacity:1,x:0},e)}a||t.to(o,{opacity:.65,x:-100},.5*n)})),ScrollTrigger.create({trigger:".icon_how-we",start:"center center",endTrigger:".text_how-we:last-of-type",end:"center center",pin:!0,markers:!1,animation:t,scrub:!0})})),mm.add("(max-width: 768px)",(()=>{const e=document.querySelectorAll(".text_how-we"),t=gsap.timeline();document.querySelector(".icon_how-we svg");e.forEach(((o,n)=>{const r=0===n,a=n===e.length-1;if(!r){gsap.set(o,{opacity:.2,x:-10});const e=.5*(n-1);t.to(o,{opacity:1,x:0},e)}a||t.to(o,{opacity:.2,x:-10},.5*n)})),ScrollTrigger.create({trigger:".icon_how-we",start:"center center",endTrigger:".text_how-we:last-of-type",end:"center center",pin:!1,markers:!1,animation:t,scrub:!0})}))})),document.querySelectorAll(".our-result").forEach((e=>{const t=e.querySelectorAll(".our-result_accordion"),o=e.querySelectorAll(".our-result_item"),n=e.querySelector(".our-result_see-project");t.forEach(((e,t)=>e.dataset.index=t)),o.forEach(((e,t)=>e.dataset.index=t));const r=(e,t)=>{const o=e.querySelector(".our-result_accordion-content");o&&(t?(e.classList.add("expanded"),o.style.transition="none",o.style.maxHeight="0px",o.offsetHeight,o.style.transition="max-height 0.3s ease, padding-top 0.3s ease",o.style.maxHeight=o.scrollHeight+"px"):(e.classList.remove("expanded"),o.style.maxHeight="0px"))};t.forEach((o=>{o.addEventListener("click",(()=>{const n=o.dataset.index,a=e.querySelector(`.our-result_item[data-index="${n}"]`);a&&gsap.to(window,{duration:1,scrollTo:{y:a,offsetY:window.innerHeight/2-a.offsetHeight/2},ease:"power2.out"});const i=o.classList.contains("expanded");t.forEach((e=>r(e,!1))),r(o,!i)}))}));const a=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){(e=>{t.forEach((t=>{const o=t.dataset.index===e;if(t.classList.toggle("active",o),r(t,o),o&&n){const e=t.dataset.url;n.href="case/"+e}}))})(e.target.dataset.index)}}))}),{threshold:.5});o.forEach((e=>a.observe(e)))}));const panels=gsap.utils.toArray(".what-we_panel");mm.add("(min-width: 991px)",(()=>{const e=gsap.timeline({scrollTrigger:{trigger:".section_what-we",pin:!0,scrub:!0,markers:!1,start:"top top",end:()=>"+="+window.innerWidth*panels.length}});panels.forEach(((t,o)=>{const n=t.querySelector(".what-we_inner")||t.querySelector(".what-we_services"),r=t.offsetWidth;if(e.to(panels,{xPercent:-100*o,duration:0===o?.3:2,ease:"none"}),n&&n.scrollWidth>r){const t=n.scrollWidth-r,o=t/1e3;t>0?e.to(n,{x:-t,ease:"none",duration:o}):e.to({},{duration:.3})}t.querySelectorAll(".what-we_service-item[data-expand]").forEach((t=>{const o=t.querySelector("img"),n=t.querySelectorAll("svg"),r=t.querySelector(".what-we_service-item-icon");o&&gsap.fromTo(o,{scale:0,opacity:0,width:0,marginLeft:0,marginRight:0},{scale:1,opacity:1,width:"auto",transformOrigin:"top right",marginLeft:"-43px",marginRight:"-18px",scrollTrigger:{containerAnimation:e,trigger:t,start:"left 50%",end:"right 50%",scrub:!0,markers:!1}}),n.forEach((o=>{gsap.fromTo(o,{scale:1},{scale:2.5,transformOrigin:"top right",scrollTrigger:{containerAnimation:e,trigger:t,start:"left 50%",end:"right 50%",scrub:!0}})})),r&&gsap.to(r,{gridColumnGap:"0px",scrollTrigger:{containerAnimation:e,trigger:t,start:"left 50%",end:"right 50%",scrub:!0,markers:!1}})}))}))})),mm.add("(max-width: 992px)",(()=>{panels.forEach((e=>{e.querySelectorAll(".what-we_service-item[data-expand]").forEach((e=>{const t=e.querySelector(".what-we_service-item-icon"),o=e.querySelector("img"),n=e.querySelectorAll("svg");t&&gsap.to(t,{gridColumnGap:"0px",scrollTrigger:{trigger:e,start:"top 80%",end:"+=200",scrub:!1,toggleActions:"play none none reverse",markers:!1}}),o&&gsap.fromTo(o,{display:"none",scale:0,opacity:0,width:0,marginLeft:0,marginRight:0},{scale:1,opacity:1,display:"block",width:"auto",transformOrigin:"top right",marginRight:"-1px",marginLeft:"-13px",duration:2,ease:"none",scrollTrigger:{trigger:e,start:"top 80%",end:"+=200",scrub:!0,markers:!1}}),n.forEach((t=>{gsap.fromTo(t,{scale:1},{scale:2.5,ease:"none",transformOrigin:"top right",scrollTrigger:{trigger:e,start:"top 80%",duration:1,end:"+=200",scrub:!0}})}))}))}))})),mm.add("(min-width: 769px)",(()=>{const e=document.querySelector(".connect_content").offsetWidth,t=document.querySelector(".section_connect"),o=(document.querySelector(".section_what-we"),window.innerWidth,window.innerWidth*panels.length*3),n=()=>{const e=t.offsetHeight;return Math.min(window.innerHeight,e+o)},r=()=>{t.style.marginTop=-n()+"px"};r(),ScrollTrigger.addEventListener("revert",r),ScrollTrigger.create({trigger:t,start:()=>"top "+(window.innerHeight-n()),end:()=>"+="+e,pin:!0,markers:!1});const a=e-window.innerWidth/2+10;gsap.set(".connect_logo",{xPercent:-50,yPercent:-50,x:a}),gsap.set(".footer-wrapper",{height:"70vh"}),gsap.set(".connect_logo",{opacity:1});const i=gsap.timeline({scrollTrigger:{trigger:".connect_wrapper",start:"top top",end:`+=${e}`,scrub:!0,pin:!0,markers:!1}}).to({},{duration:2}).to(".connect_content",{x:-e,duration:8,ease:"none"}).to(".connect_logo",{x:0,duration:7,ease:"none"},"<"),s=gsap.timeline({scrollTrigger:{trigger:".section_footer",start:"top bottom",end:`+=${window.innerHeight}`,scrub:!0,markers:!1,toggleActions:"play reverse reset reverse"}});gsap.set(".connect_form",{height:"0px",display:"none"}),s.to(".footer",{position:"sticky",bottom:0,duration:1}).to(".footer-wrapper",{height:"90vh",ease:"none",duration:2}).to(".connect_logo",{top:"82.2px",yPercent:0,ease:"none",duration:1.5},"<+1").to(".connect_logo",{scale:.3,ease:"none",duration:.9}).to(".connect_logo",{opacity:0,duration:.1,ease:"none",onComplete:function(){if(c)return;c=!0;const e=document.getElementById("explotionAnimation");e.style.display="block";const t=document.getElementById("explotionBackground");let o=[];for(let e=0;e<80;e++){const e=document.createElement("div");e.innerHTML='\n      <svg class="logo-burst" width="176" height="176" viewBox="0 0 176 176" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M49.8667 159.984C20.7849 152.819 12.4596 133.006 12.4596 87.9857C12.4596 42.9651 20.8132 23.1526 49.8667 15.987V0H0V176H49.8667V160.013V159.984Z" fill="#C4B5F2"/>\n        <path d="M126.134 0V15.9896C155.216 23.1564 163.541 42.9721 163.541 88C163.541 133.028 155.216 152.844 126.134 160.01V176H176V0H126.134Z" fill="#C4B5F2"/>\n      </svg>';const n=e.firstElementChild;t.appendChild(n),o.push(n)}gsap.set(o,{scale:"1",x:100,y:100,rotation:"random(0, 360)"}),gsap.to(o,{duration:5,physics2D:{velocity:"random(200, 1000)",angle:"random(250, 290)",gravity:500},onComplete:()=>{o.forEach((e=>e.remove())),e.style.display="none",c=!1}})}}).to(".connect_form-wrapper",{opacity:1,marginTop:"20vh",ease:"power2.out",duration:.4},"<").to(".connect_form",{height:"max-content",display:"flex",ease:"power2.out",paddingBottom:"0px",duration:.4,delay:.1},"<").to(".footer-wrapper",{height:"68vh",ease:"power2.out",duration:.5},"<"),SplitText.create(".connect_content-after",{type:"chars",charsClass:"letter"}).chars.forEach((e=>{const t=(Math.floor(7*Math.random())+10)*(Math.random()<.5?-1:1)*10,o=(Math.floor(11*Math.random())+10)*(Math.random()<.5?-1:1);gsap.set(e,{yPercent:t,rotation:o}),gsap.fromTo(e,{yPercent:t,rotation:o},{yPercent:0,rotation:0,ease:"elastic.out(1.2, 1)",scrollTrigger:{trigger:e,containerAnimation:i,start:"left 80%",end:"left 0%",scrub:!0,markers:!1}})}));let c=!1;ScrollTrigger.create({trigger:".section_footer",start:"top bottom",end:"bottom bottom",onLeaveBack:()=>{const e=document.getElementById("explotionAnimation");e&&(e.style.display="none"),c=!1}})}));
